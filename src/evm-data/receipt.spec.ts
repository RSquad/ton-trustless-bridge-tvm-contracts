import {IReceiptJSON, Receipt} from './receipt';


describe('Receipt test', () => {

  it('should create new instance from JSON', async () => {

    const r = Receipt.fromJSON(jsonReceipt as unknown as IReceiptJSON);
    const cell = r.toCell();
    const str = cell.toString();

    expect(str).toEqual(strResult);
  });
});


const jsonReceipt = {
  "blockHash": "0xcbb4f043b23df01eadee5d5212c7ee594379d9cb80adb95fa112af3024246cee",
  "blockNumber": "0x1082f93",
  "contractAddress": null,
  "cumulativeGasUsed": "0xd1535e",
  "effectiveGasPrice": "0x77bea5f34",
  "from": "0x490280fce68208ce25e0b7fa9916f06a07c332d0",
  "gasUsed": "0x2fa53",
  "logs": [
    {
      "address": "0x2b591e99afe9f32eaa6214f7b7629768c40eeb39",
      "blockHash": "0xcbb4f043b23df01eadee5d5212c7ee594379d9cb80adb95fa112af3024246cee",
      "blockNumber": "0x1082f93",
      "data": "0x00000000000000000000000000000000000000000000000000002b79a76d5f00",
      "logIndex": "0x127",
      "removed": false,
      "topics": [
        "0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef",
        "0x000000000000000000000000490280fce68208ce25e0b7fa9916f06a07c332d0",
        "0x0000000000000000000000001715a3e4a142d8b698131108995174f37aeba10d"
      ],
      "transactionHash": "0x303c0bf8f73b0ae7ef24d397d36c7457c0950e7251253c10a8d34ce2d43f9021",
      "transactionIndex": "0x8f"
    },
    {
      "address": "0x2b591e99afe9f32eaa6214f7b7629768c40eeb39",
      "blockHash": "0xcbb4f043b23df01eadee5d5212c7ee594379d9cb80adb95fa112af3024246cee",
      "blockNumber": "0x1082f93",
      "data": "0x00000000000000000000000000000000000000000000000000000000002a768f",
      "logIndex": "0x128",
      "removed": false,
      "topics": [
        "0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925",
        "0x000000000000000000000000490280fce68208ce25e0b7fa9916f06a07c332d0",
        "0x0000000000000000000000001715a3e4a142d8b698131108995174f37aeba10d"
      ],
      "transactionHash": "0x303c0bf8f73b0ae7ef24d397d36c7457c0950e7251253c10a8d34ce2d43f9021",
      "transactionIndex": "0x8f"
    },
    {
      "address": "0xd0764fae29e0a6a96ff685f71cfc685456d5636c",
      "blockHash": "0xcbb4f043b23df01eadee5d5212c7ee594379d9cb80adb95fa112af3024246cee",
      "blockNumber": "0x1082f93",
      "data": "0x000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000b600050000809822368a3e57b54d6426d420b1294d3262f4f5000000000000cfe91715a3e4a142d8b698131108995174f37aeba10d4fd0aaa7506f3d9cb8274bdb946ec42a1b8751ef001e8480010200010171125e4cfb0000000000000000000000002b591e99afe9f32eaa6214f7b7629768c40eeb39000000000000000000000000490280fce68208ce25e0b7fa9916f06a07c332d000000000000000000000000000000000000000000000000000002b79a76d5f0000000000000000000000",
      "logIndex": "0x129",
      "removed": false,
      "topics": [
        "0x482515ce3d9494a37ce83f18b72b363449458435fafdd7a53ddea7460fe01b58",
        "0x00050000809822368a3e57b54d6426d420b1294d3262f4f5000000000000cfe9"
      ],
      "transactionHash": "0x303c0bf8f73b0ae7ef24d397d36c7457c0950e7251253c10a8d34ce2d43f9021",
      "transactionIndex": "0x8f"
    },
    {
      "address": "0x1715a3e4a142d8b698131108995174f37aeba10d",
      "blockHash": "0xcbb4f043b23df01eadee5d5212c7ee594379d9cb80adb95fa112af3024246cee",
      "blockNumber": "0x1082f93",
      "data": "0x00000000000000000000000000000000000000000000000000002b79a76d5f00",
      "logIndex": "0x12a",
      "removed": false,
      "topics": [
        "0x59a9a8027b9c87b961e254899821c9a276b5efc35d1f7409ea4f291470f1629a",
        "0x0000000000000000000000002b591e99afe9f32eaa6214f7b7629768c40eeb39",
        "0x000000000000000000000000490280fce68208ce25e0b7fa9916f06a07c332d0",
        "0x00050000809822368a3e57b54d6426d420b1294d3262f4f5000000000000cfe9"
      ],
      "transactionHash": "0x303c0bf8f73b0ae7ef24d397d36c7457c0950e7251253c10a8d34ce2d43f9021",
      "transactionIndex": "0x8f"
    }
  ],
  "logsBloom": "0x00000000000000404008000000000001000000000000000000000000000000000000000000000000000010000002000000000000000000000000000000200000000020000000000000000008000404000000000000020000000000000000000000000000000000000080000000000000000000000000000000000014000000000000000000000800000000000100000000000000000000000000000000000000020000000000010100000000000000000000000020020000000000000000000000080002000000000000000000400000000000040200000000100000000000000010000000000000010000008000000000000000200000000800000000000000",
  "status": "0x1",
  "to": "0x1715a3e4a142d8b698131108995174f37aeba10d",
  "transactionHash": "0x303c0bf8f73b0ae7ef24d397d36c7457c0950e7251253c10a8d34ce2d43f9021",
  "transactionIndex": "0x8f",
  "type": "0x2"
};

const strResult = `x{01D1535E}
 x{000000000000004040080000000000010000000000000000000000000000000000000000000000000000100000020000000000000000000000000000002000000000200000000000000000080004040000000000000200000000000000000000}
  x{000000000000000080000000000000000000000000000000000014000000000000000000000800000000000100000000000000000000000000000000000000020000000000010100000000000000000000000020020000000000000000000000}
   x{0002000000000000000000400000000000040200000000100000000000000010000000000000010000008000000000000000200000000800000000000000}
 x{2B591E99AFE9F32EAA6214F7B7629768C40EEB39}
  x{DDF252AD1BE2C89B69C2B068FC378DAA952BA7F163C4A11628F55A4DF523B3EF}
   x{000000000000000000000000490280FCE68208CE25E0B7FA9916F06A07C332D0}
    x{0000000000000000000000001715A3E4A142D8B698131108995174F37AEBA10D}
  x{00000000000000000000000000000000000000000000000000002B79A76D5F00}
  x{2B591E99AFE9F32EAA6214F7B7629768C40EEB39}
   x{8C5BE1E5EBEC7D5BD14F71427D1E84F3DD0314C0F7B2291E5B200AC8C7C3B925}
    x{000000000000000000000000490280FCE68208CE25E0B7FA9916F06A07C332D0}
     x{0000000000000000000000001715A3E4A142D8B698131108995174F37AEBA10D}
   x{00000000000000000000000000000000000000000000000000000000002A768F}
   x{D0764FAE29E0A6A96FF685F71CFC685456D5636C}
    x{482515CE3D9494A37CE83F18B72B363449458435FAFDD7A53DDEA7460FE01B58}
     x{00050000809822368A3E57B54D6426D420B1294D3262F4F5000000000000CFE9}
    x{000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000B600050000809822368A3E57B54D6426D420B1294D3262F4F5000000000000CFE9}
     x{15A3E4A142D8B698131108995174F37AEBA10D4FD0AAA7506F3D9CB8274BDB946EC42A1B8751EF001E8480010200010171125E4CFB0000000000000000000000002B591E99AFE9F32EAA6214F7B7629768C40EEB390000000000000000000000}
      x{490280FCE68208CE25E0B7FA9916F06A07C332D000000000000000000000000000000000000000000000000000002B79A76D5F0000000000000000000000}
    x{1715A3E4A142D8B698131108995174F37AEBA10D}
     x{59A9A8027B9C87B961E254899821C9A276B5EFC35D1F7409EA4F291470F1629A}
      x{0000000000000000000000002B591E99AFE9F32EAA6214F7B7629768C40EEB39}
       x{000000000000000000000000490280FCE68208CE25E0B7FA9916F06A07C332D0}
        x{00050000809822368A3E57B54D6426D420B1294D3262F4F5000000000000CFE9}
     x{00000000000000000000000000000000000000000000000000002B79A76D5F00}`;
